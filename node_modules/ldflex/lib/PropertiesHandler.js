"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _jsonldContextParser = require("jsonld-context-parser");

var _promiseUtils = require("./promiseUtils");

/**
 * Queries for all compacted predicates of a path subject
 */
class PropertiesHandler {
  handle(pathData, path) {
    return (0, _promiseUtils.toIterablePromise)(this._handle(pathData, path));
  }

  async *_handle(pathData, path) {
    const contextRaw = (await pathData.settings.parsedContext) || {};
    const context = new _jsonldContextParser.JsonLdContextNormalized(contextRaw);

    for await (const predicate of path.predicates) yield context.compactIri(`${await predicate}`, true);
  }

}

exports.default = PropertiesHandler;